{"version":3,"file":"static/webpack/static/development/pages/names.js.aa5b971013b50f73e775.hot-update.js","sources":["webpack:///./components/WomenList.js"],"sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport styled from \"styled-components\";\nimport * as _ from \"lodash\";\nimport { WomenListWrap, Container, InnerWrap } from \"./styles/WomenList\";\nimport { genId, setBodyHeight } from \"./helpers\";\n\nclass WomenList extends Component {\n  state = {\n    scrollTop: 0,\n    newlyAddedItem: null\n    // scrollUpdatedOnLoad: false\n  };\n\n  allWomen = null;\n  womenWithId = null;\n\n  _scrollToHash = () => {\n    // if (!this.state.scrollUpdatedOnLoad) {\n    if (typeof window === \"undefined\") {\n      return 0;\n    } else {\n      const hash = window.location.hash;\n      if (hash !== \"\") {\n        const id = hash.substr(1);\n        debugger;\n        const elScrollHeight = document.querySelector(`[data-nameid=${id}]`)\n          .offsetTop;\n\n        const halfHeight = window.innerHeight / 2.5;\n        const totalScrollHeight = elScrollHeight - halfHeight;\n        document.querySelectorAll(`.${id}`).forEach(el => {\n          el.classList.add(\"highlighted\");\n        });\n        if (elScrollHeight) {\n          window.scrollTo({\n            top: totalScrollHeight,\n            left: 0\n            // behavior: \"smooth\"\n          });\n        } else {\n          window &&\n            typeof window === \"object\" &&\n            window.scrollTo &&\n            typeof window.scrollTo === \"function\" &&\n            window.scrollTo(0, 0);\n        }\n      }\n    }\n    this.setState({ scrollUpdatedOnLoad: true });\n    // }\n  };\n\n  _calcWomenList = () => {\n    if (this.props.women) {\n      this.womenWithId = this.props.women.map((woman, index) => {\n        const personId = genId(woman.name);\n\n        return (\n          <div\n            data-nameid={personId}\n            className={`womanItem ${personId}`}\n            key={woman.id + personId + index}\n            onClick={e => this._addHighlightClass(e)}\n          >\n            <span className=\"inner-relative\">\n              <span onClick={e => this._onShareClick(e)} className=\"super-cta\">\n                Share\n              </span>\n              <h1>{woman.name}</h1>\n            </span>\n          </div>\n        );\n      });\n\n      this.allWomen = this.props.women.map((woman, index) => {\n        const personId = genId(woman.name);\n\n        return (\n          <div\n            onClick={e => this._addHighlightClass(e)}\n            className={`womanItem ${personId}`}\n            key={woman.id + index}\n          >\n            <span className=\"inner-relative\">\n              <span onClick={e => this._onShareClick(e)} className=\"super-cta\">\n                Share\n              </span>\n              <h1>{woman.name}</h1>\n            </span>\n          </div>\n        );\n      });\n    }\n  };\n\n  componentWillMount() {\n    this._calcWomenList();\n  }\n\n  componentDidMount() {\n    setBodyHeight();\n    document.addEventListener(\"scroll\", this._throttleScroll);\n    window.addEventListener(\"resize\", setBodyHeight);\n    this.setState({ scrollTop: window.pageYOffset });\n\n    this._scrollToHash();\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    // if a new woman has been added\n    // if (prevProps.women.length !== this.props.women.length) {\n    //   this._calcWomenList();\n    //   this._scrollToHash();\n    //   setBodyHeight();\n    // }\n    // if (!this.state.scrollUpdatedOnLoad) {\n    //   this._scrollToHash();\n    // }\n  }\n\n  componentWillUnmount() {\n    if (typeof window === \"undefined\") {\n      return 0;\n    } else if (typeof window != \"undefined\") {\n      document.removeEventListener(\"scroll\", this._throttleScroll);\n    }\n  }\n\n  // This will run the first time setBodyHeight is called.\n  _onScroll = e => {\n    const bodyScrollTop = window.pageYOffset;\n    this.setState({ scrollTop: bodyScrollTop });\n  };\n\n  _throttleScroll = _.throttle(this._onScroll, 100);\n\n  _onShareClick = e => {\n    console.log(\"inside ons hare click\");\n    const id = e.currentTarget.parentNode.parentNode.dataset.nameid;\n    console.log({ id });\n    const domain = \"http://localhost:7777\";\n    const link = `${domain}/names#${id}`;\n    const dummy = document.createElement(\"textarea\");\n    document.body.appendChild(dummy);\n    dummy.classList.add(\"display-none\");\n    dummy.innerHTML = link;\n    console.log(dummy);\n    dummy.select();\n    document.execCommand(\"copy\");\n    document.body.removeChild(dummy);\n    console.log(link);\n    e.currentTarget.innerHTML = \"Copied to clipboard\";\n  };\n\n  _addHighlightClass = e => {\n    // extract data-nameid\n    const dataId = e.currentTarget.dataset.nameid;\n    document\n      .querySelectorAll(`.${dataId}`)\n      .forEach(el => el.classList.add(\"highlighted\"));\n    // el.classList.addClass(\"highlighted\");\n  };\n\n  render() {\n    const containers = (\n      <Fragment>\n        <WomenListWrap\n          formFocused={this.props.formFocused}\n          style={{\n            transform: `rotateY(${this.props.x}deg)`\n          }}\n        >\n          <Container\n            style={{\n              transformOrigin: `bottom center`,\n              transform: `matrix3d(\n                  1,\n                  0,\n                  0,\n                  0,\n                  0,\n                  ${this.props.matrix3DVal2},\n                  ${this.props.matrix3DVal1},\n                  0,\n                  0,\n                  ${this.props.matrix3DVal1 * -1},\n                  ${this.props.matrix3DVal2},\n                  0,\n                  0,\n                  0,\n                  0,\n                  1\n                )`\n            }}\n          >\n            <div className=\"hidden\">\n              <InnerWrap\n                order={0}\n                style={{\n                  transform: `translate3d(0px, -${this.state.scrollTop}px, 0px)`\n                }}\n                className=\"womenWrapper\"\n              >\n                <div className=\"hidden\">{this.allWomen}</div>\n              </InnerWrap>\n            </div>\n          </Container>\n          <Container>\n            <div className=\"hidden\">\n              <InnerWrap\n                id=\"womanList\"\n                style={{\n                  transform: `translate3d(0px, -${this.state.scrollTop}px, 0px)`\n                }}\n                order={1}\n                className=\"womenWrapper\"\n              >\n                <div className=\"hidden\">{this.womenWithId}</div>\n              </InnerWrap>\n            </div>\n          </Container>\n          <Container\n            style={{\n              transformOrigin: `top center`,\n              transform: `matrix3d(\n                  1,\n                  0,\n                  0,\n                  0,\n                  0,\n                  ${this.props.matrix3DVal2},\n                  ${this.props.matrix3DVal1},\n                  0,\n                  0,\n                  ${this.props.matrix3DVal1 * -1},\n                  ${this.props.matrix3DVal2},\n                  0,\n                  0,\n                  0,\n                  0,\n                  1\n                )`\n            }}\n          >\n            <div className=\"hidden\">\n              <InnerWrap\n                style={{\n                  transform: `translate3d(0px, -${this.state.scrollTop}px, 0px)`\n                }}\n                order={2}\n                className=\"womenWrapper\"\n              >\n                {this.allWomen}\n              </InnerWrap>\n            </div>\n          </Container>\n        </WomenListWrap>\n      </Fragment>\n    );\n\n    return containers;\n  }\n}\n\n// Set default props\nWomenList.defaultProps = {\n  x: 0,\n  y: 0,\n  matrix3DVal1: 0.18,\n  matrix3DVal2: 0.89\n};\n\nexport default WomenList;\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAHA;AACA;AAKA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AACA;AAEA;AAEA;AAAA;AAAA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAmCA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAEA;AACA;;;;;;AAnEA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAoCA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AADA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AADA;AAGA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AADA;AAGA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AADA;AAGA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;;;;AA/PA;AACA;AACA;AAiQA;AACA;AACA;AACA;AACA;AAJA;AAOA;;;;A","sourceRoot":""}